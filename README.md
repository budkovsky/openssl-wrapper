# OpenSSL Wrapper for PHP

PHP OpenSSL object-oriented implementation.
Wraps PHP functions from ext-openssl extension to modern, PHP7-compatible objects with full type-hinting.
No results returned by reference, no "false" boolean return on failed, when expecting  scalar / object values. 
According to PHP7 type-hinting implementation, sometimes "null" can be returned instead.

## Requirements
* PHP 7.2+
* ext-openssl PHP extension

## Installation

## Wrapper class
Wrapper contains functions not associated with other objects like *PrivateKey* or *X509*. Functions are callable staticly, for example:

```php
OpenSSL::getDigestMethods(true);
```
Wrapper includes two extra methods, not exist in orginal OpenSSL extension for PHP.

```php
Wrapper::isDigestMethodValid($someMethod);
Wrapper::isCipherMethodValid($otherMethod);
```

## PrivateKey class

### PrivateKey object creation
Private class can be created in two ways:
- via classic constructor  
- or via static factory method:

```php
//via constructor
$key = new PrivateKey();

//via static factory
$key = PrivateKey::create();
```
If you want to set some specific parameters for a new key, use `ConfigArgs` object as the parameter for the constructor or static factory.

```php
use Budkovsky\OpenSslWrapper\PrivateKey;
use Budkovsky\OpenSslWrapper\Entity\ConfigArgs;

//set parameters for a new key into ConfigArgs object
$configArgs = ConfigArgs::create()
	->setPrivateKeyType(KeyType::RSA)
	->setEncryptKey(false);
	
//pass ConfigArgs object to the constructor
$key = new PrivateKey($configArgs);
```

### Reading existing private key from file
Immediately after creating a new object, PrivateKey contains completely new key generated by the constructor. If you want to use existing key, call `load()` with string parameter representing key body.

```php
use Budkovsky\OpenSslWrapper\PrivateKey;

$key = $new PrivateKey();
$pem = file_get_contents('/path/to/folder/key.pem');
$key->load($pem);
```

### Exporting private key to PEM format
Use `export()` or `exportToFile()` method to export PEM formatted private key to variable or a file.

```php
use Budkovsky\OpenSslWrapper\PrivateKey;

$key = new PrivateKey();
$keyBody = $key->export();
```


## PublicKey class

## ConfigArgs

## Csr class

## X509 class

## Entities

## Enums

## Collections

## Exceptions

## Abstraction

## Traits

## Unit tests

Unit tests are placed in `/tests` folder and require PHPUnit 8.


